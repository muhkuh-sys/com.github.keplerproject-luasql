--- mysql-5.7.18_org/include/my_global.h
+++ mysql-5.7.18/include/my_global.h
@@ -359,7 +359,7 @@
 
 /* Some defines of functions for portability */
 
-#if (_WIN32)
+#if defined(_WIN32) && !defined(__MINGW32__) && !defined(__MINGW64__)
 #if !defined(_WIN64)
 inline double my_ulonglong2double(unsigned long long value)
 {
