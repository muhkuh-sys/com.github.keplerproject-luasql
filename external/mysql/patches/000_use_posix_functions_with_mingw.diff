--- mysql-5.7.18_org/include/my_global.h
+++ mysql-5.7.18/include/my_global.h
@@ -655,7 +655,7 @@
 };
 
 
-#ifdef _WIN32
+#if defined(_WIN32) && !defined(__MINGW32__) && !defined(__MINGW64__)
 /****************************************************************************
 ** Replacements for localtime_r and gmtime_r
 ****************************************************************************/
