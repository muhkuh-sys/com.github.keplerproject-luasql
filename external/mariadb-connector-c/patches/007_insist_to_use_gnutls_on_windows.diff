diff -uNr mariadb-connector-c-3.1.13-src/plugins/auth/caching_sha2_pw.c mariadb-connector-c-3.1.13-src_patched/plugins/auth/caching_sha2_pw.c
--- mariadb-connector-c-3.1.13-src/plugins/auth/caching_sha2_pw.c	2022-04-20 12:10:11.818955372 +0200
+++ mariadb-connector-c-3.1.13-src_patched/plugins/auth/caching_sha2_pw.c	2022-04-20 12:13:19.967007749 +0200
@@ -20,12 +20,6 @@
 #define _GNU_SOURCE 1
 #endif
 
-#ifdef _WIN32
-#define HAVE_WINCRYPT
-#undef HAVE_OPENSSL
-#undef HAVE_GNUTLS
-#endif
-
 #if defined(HAVE_OPENSSL) || defined(HAVE_WINCRYPT) || defined(HAVE_GNUTLS)
 
 #include <ma_global.h>
diff -uNr mariadb-connector-c-3.1.13-src/plugins/auth/CMakeLists.txt mariadb-connector-c-3.1.13-src_patched/plugins/auth/CMakeLists.txt
--- mariadb-connector-c-3.1.13-src/plugins/auth/CMakeLists.txt	2022-04-20 12:10:11.818955372 +0200
+++ mariadb-connector-c-3.1.13-src_patched/plugins/auth/CMakeLists.txt	2022-04-20 12:14:18.683011251 +0200
@@ -4,20 +4,20 @@
 INCLUDE_DIRECTORIES(${CC_SOURCE_DIR}/include)
 
 SET(CRYPTO_PLUGIN 1)
-IF(WIN32)
-  SET(CRYPT_SOURCE ${CC_SOURCE_DIR}/libmariadb/secure/win_crypt.c)
-  SET(CRYPT_LIBS crypt32 bcrypt)
-ELSEIF(WITH_SSL STREQUAL "OPENSSL")
-  SET(CRYPT_SOURCE ${CC_SOURCE_DIR}/libmariadb/secure/openssl_crypt.c)
-  SET(CRYPT_LIBS ${SSL_LIBRARIES})
-ELSEIF(WITH_SSL STREQUAL "GNUTLS")
+#IF(WIN32)
+#  SET(CRYPT_SOURCE ${CC_SOURCE_DIR}/libmariadb/secure/win_crypt.c)
+#  SET(CRYPT_LIBS crypt32 bcrypt)
+#ELSEIF(WITH_SSL STREQUAL "OPENSSL")
+#  SET(CRYPT_SOURCE ${CC_SOURCE_DIR}/libmariadb/secure/openssl_crypt.c)
+#  SET(CRYPT_LIBS ${SSL_LIBRARIES})
+#ELSEIF(WITH_SSL STREQUAL "GNUTLS")
   SET(CRYPT_SOURCE ${CC_SOURCE_DIR}/libmariadb/secure/gnutls_crypt.c)
   IF (NOT SSL_LIBRARIES MATCHES "^.*\\.a$")
     SET(CRYPT_LIBS ${SSL_LIBRARIES})
   ENDIF()
-ELSE()
-  UNSET(CRYPTO_PLUGIN)
-ENDIF()
+#ELSE()
+#  UNSET(CRYPTO_PLUGIN)
+#ENDIF()
 
 #native password
 REGISTER_PLUGIN(TARGET mysql_native_password
